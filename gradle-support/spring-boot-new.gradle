apply from: rootProject.file("gradle-support/java.gradle")
apply from: rootProject.file("gradle-support/bom.gradle")

apply plugin: 'org.springframework.boot'

dependencies {
// latest spring boot handles this IIRC
//    if (project.hasProperty("cloud") && project.cloud == "development") {
//        compile "org.springframework.boot:spring-boot-devtools"
//    }

    if (project.hasProperty('ifs.zipkin.enabled') ? project.property('ifs.zipkin.enabled').toBoolean() : false) {
        compile "com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.5.5"
    }

    compile "org.springframework.boot:spring-boot-starter-actuator"
    compile "org.springframework.boot:spring-boot-starter-web"
    compile('org.springframework.cloud:spring-cloud-starter-netflix-hystrix')
    compile "org.springframework.cloud:spring-cloud-starter-sleuth"
    compile "org.springframework.cloud:spring-cloud-sleuth-zipkin"

    testCompile 'org.springframework.boot:spring-boot-starter-test'
}

processResources {
    filesMatching("*.properties") {
        expand project.properties
    }
}

processTestResources {
    filesMatching("*.properties") {
        expand project.properties
    }
}

bootJar {
    classifier = 'executable'
    mainClassName = 'org.innovateuk.ifs.Application'
}

test.finalizedBy jacocoTestReport
