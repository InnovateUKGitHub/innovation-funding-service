ext.openshiftEnv = project.properties['openshiftEnv'] ?: "automated"

ext.server_url = project.properties['serverUrl'] ?: "ifs.local-dev"
ext.authorisation_url = project.properties['authorisationUrl'] ?: "auth.local-dev:9443"
ext.fail_criteria = project.properties['failCriteria'] ?: "succ<100%, stop as failed"
ext.invite_users = project.properties['inviteUsers'] ?: 1
ext.registration_users = project.properties['registrationUsers'] ?: 1
ext.front_door_users = project.properties['frontDoorUsers'] ?: 1
ext.comp_management_users = project.properties['compManagementUsers'] ?: 1
ext.applicant_users = project.properties['applicantUsers'] ?: 1
ext.H2020_users = project.properties['H2020Users'] ?: 1
ext.assessor_users = project.properties['assessorUsers'] ?: 1
ext.provisioning = project.properties['provisioning'] ?: "local"
ext.data_path = ''

if (provisioning == 'local') {
    data_path = "jmeter/Representative/"
}

task prepareTaurusDeployment(type: Copy) {

    destinationDir = file('./')

    from('taurus') {
        include '**/taurus.yml'
    }
    filesMatching("**/**.*") {
        expand project.properties
    }
}

task osRunTaurus(type: Exec) {
    dependsOn prepareTaurusDeployment
    executable = 'setup-files/scripts/openshift/os-taurus.sh'
}