apply plugin: org.flywaydb.gradle.FlywayPlugin

buildscript {
    repositories {
        maven { url "https://repo.spring.io/milestone" }
        maven { url "https://plugins.gradle.org/m2/"}
        mavenCentral()
    }

    dependencies {
        classpath 'org.flywaydb:flyway-gradle-plugin:8.5.13'
        classpath 'org.flywaydb:flyway-core:8.5.13'
        classpath 'org.flywaydb:flyway-mysql:8.5.13'
    }
}

dependencies {
    implementation enforcedPlatform("org.flywaydb:flyway-core") {
        exclude group: "commons-logging", module: "commons-logging"
    }
    implementation enforcedPlatform("com.h2database:h2:1.4.199")

    implementation "org.flywaydb:flyway-core"
    implementation "org.flywaydb:flyway-mysql"
    implementation "org.mariadb.jdbc:mariadb-java-client"
    testImplementation "com.h2database:h2" //1.4.200
}

flyway {
    url = 'jdbc:mysql://ifs-database:3306/ifs?permitMysqlScheme'
    table = 'schema_version'
    user = 'root'
    password = 'password'
    schemas = ['ifs']
    placeholders = [
            'ifs.system.user.uuid': 'c0d02979-e66e-11e7-ac43-0242ac120002'
    ]
    locations= [
            'db/migration', 'db/reference', ' db/setup', 'db/webtest'
    ]
    baselineOnMigrate = 'false'
}
