def targetBuild = hasProperty('profile') ? profile : 'docker'

apply from: rootProject.file("gradle-support/spring-boot.gradle")
apply from: rootProject.file("gradle-support/mapstruct.gradle")

apply from: rootProject.file("gradle-support/profile-handler.gradle")
apply from: rootProject.file("gradle-support/jib.gradle")

apply from: "../flyway.gradle"

afterEvaluate {
    ext {
        dockerDir = file("$project.parent.projectDir/docker/")
    }
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation "org.springframework.boot:spring-boot-starter-validation"
    implementation "org.springframework.boot:spring-boot-starter-security"

    implementation project(":common:ifs-commons")
    implementation project(":common:ifs-error-util")
    implementation project(":common:ifs-rest-util")
    implementation project(":common:ifs-resources")
    implementation project(":common:ifs-survey-resources")
    implementation project(":common:ifs-security")

    testImplementation project(":common:ifs-commons-test")
    testImplementation project(":common:ifs-security-test")

    testImplementation "junit:junit"
}

test {
    if (project.hasProperty('excludeTests')) {
        exclude "${project.excludeTests}"
    }
}
