<!DOCTYPE html>
<html lang="en" class="govuk-template" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Dashboard'" />
</head>

<body class="govuk-template__body app-dashboard">

<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header" />
<div class="govuk-width-container">
    <th:block th:insert="fragments/layout :: phase-banner" />

    <main class="govuk-main-wrapper" id="main-content" role="main">
        <div class="my-applications">
            <th:block th:insert="fragments/layout :: page-title" th:with="pageTitle='Project setup',size='govuk-heading-l'" />
            <form th:object="${form}" method="post" novalidate="novalidate" th:action="@{${#ifsUtil.formPostUri(#httpServletRequest)}}">
                <div class="govuk-grid-row">
                <div class="govuk-grid-column-one-third">
                    <form id="filter-projects" method="GET">
                        <fieldset class="govuk-fieldset">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s govuk-!-margin-0">
                                <h2 class="govuk-fieldset__heading">
                                    Filter projects
                                </h2>
                            </legend>
                            <hr class="govuk-section-break govuk-section-break--visible" />
                            <div class="govuk-form-group govuk-!-margin-top-6">
                                <h2 class="govuk-heading-s">
                                    Filter projects
                                </h2>
                                <div class="govuk-checkboxes">
                                    <div class="govuk-checkboxes__item">
                                        <input id="projectInSetup"
                                               class="govuk-checkboxes__input"
                                               type="checkbox"
                                               value="projectInSetup"
                                               th:field="${form.projectInSetup}"
                                        />
                                        <label class="govuk-label govuk-checkboxes__label">
                                            <span th:text="'In setup (' + ${model.inSetupProjectCount} + ')'">In setup (18)</span>
                                        </label>
                                    </div>
                                    <div class="govuk-checkboxes__item">
                                        <input id="previousProject"
                                               class="govuk-checkboxes__input"
                                               type="checkbox"
                                               value="previousProject"
                                               th:field="${form.previousProject}"
                                        />
                                        <label class="govuk-label govuk-checkboxes__label">
                                            <span th:text="'Previous (' + ${model.previousProjectCount} + ')'">Previous (5)</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="govuk-form-group">
                                <button class="govuk-button" id="update-competition-results-button">Update results</button>
                            </div>
                        </fieldset>
                    </form>
                </div>
                <div class="govuk-grid-column-two-thirds">
                    <h2 class="govuk-heading-s govuk-!-margin-0" th:text="${model.projectCount} + ' projects'">37 projects</h2>
                    <hr class="govuk-section-break govuk-section-break--visible" />
                    <div class="progress-list progress-list--individual-blocks">
                        <ul>
                            <li th:each="projectView : ${model.projects}">
                                <div class="task">
                                    <h3 class="govuk-heading-s">
                                        <a th:href="${projectView.linkUrl}" th:text="${projectView.title}" class="govuk-link">PROJECT NAME</a>
                                    </h3>
                                    <ul class="application-details">
                                        <li>Project number: <span th:text="${projectView.applicationNumber}">PROJECT NUMBER</span></li>
                                        <li>Competition: <span th:text="${projectView.competitionTitle}">COMPETITION NAME</span></li>
                                    </ul>
                                </div>
                                <div class="status">
                                    <th:block th:unless="${projectView.projectState.complete}">
                                        <strong class="status-msg msg-progress">
                                            Monitor project
                                        </strong>
                                    </th:block>
                                    <th:block th:if="${projectView.projectState.complete}">
                                        <p th:if="${projectView.liveOrCompletedOffline}" class="govuk-body status-msg msg-progress">Live project</p>
                                        <p th:if="${projectView.unsuccessful}" class="govuk-body status-msg msg-progress msg-negative">Unsuccessful</p>
                                        <p th:if="${projectView.withdrawn}" class="govuk-body status-msg msg-progress">Withdrawn</p>
                                    </th:block>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            </form>
            <section class="terms-and-conditions">
                <p class="govuk-body"><a href="/info/terms-and-conditions" class="govuk-link">Read the terms and conditions</a></p>
            </section>
        </div>


        <th:block th:insert="fragments/layout :: main-content-end" />
    </main>
</div>

<th:block th:insert="fragments/layout :: footer" />
<th:block th:insert="fragments/layout :: body-end" />
<th:block th:insert="fragments/service-layout :: body-end" />
</body>

</html>
