<!DOCTYPE html>
<html lang="en" class="govuk-template" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Your project costs'"/>
</head>
<body class="govuk-template__body finance-row-form overheads">
<th:block th:insert="fragments/layout :: body-start"/>
<th:block th:insert="fragments/layout :: global-header"/>

<div class="govuk-width-container">
    <th:block th:insert="fragments/layout :: phase-banner"/>

    <th:block th:insert="fragments/layout :: header-sub"
              th:with="linkTitle='Your project finances',linkClass='link-back',linkUrl=${model.financesUrl}"/>

    <main class="govuk-main-wrapper" id="main-content" role="main">

        <div th:if="${#fields.hasErrors('${form.*}')}" class="govuk-error-summary"
             aria-labelledby="error-summary-title"
             role="alert"
             tabindex="-1"
             data-module="govuk-error-summary">
            <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
            <th:block th:insert="fragments/elements :: error-summary-list(form)"/>
        </div>

        <th:block th:insert="fragments/layout :: page-title"
                  th:with="pageTitle='Your project costs',subTitle=${model.applicationName},size='govuk-heading-xl'"/>

        <form th:object="${form}"
              th:action="@{${#ifsUtil.formPostUri(#httpServletRequest)}}"
              enctype="multipart/form-data"
              novalidate="novalidate"
              method="POST">
            <button class="hidden-save" type="submit" tabindex="-1" aria-hidden="true">Save</button>
            <input type="hidden" id="cacheTest" value=""/>

            <h2 class="govuk-heading-m govuk-!-margin-0"
                th:text="|Provide the project costs for '${model.organisationName}'|"></h2>
            <p class="govuk-body">
                Only your organisation can see this level of detail. All members of your organisation can access
                and edit your project finances. We recommend assigning completion of your project finances to one
                member of your team.
                <br>
                <th:block th:unless="${model.readOnly}">
                    To assist with the completion of this project costs page, use the IFS Conversion tool found here:
                    <a href="https://www.ukri.org/publications/horizon-europe-guarantee-notice-and-guidance/"
                       target="_blank" class="govuk-link">Horizon Europe guarantee notice and guidance â€“ UKRI</a>.
                    If you have further questions on how to fill out this page, contact <a href="mailto:heguarantee@iuk.ukri.org">heguarantee@iuk.ukri.org</a>.
                </th:block>
            </p>

            <th:block th:insert="application/hecp-costs-fragments :: hecp-costs" />

            <div class="govuk-grid-row total-cost">
                <div class="govuk-grid-column-one-half">
                    <label for="total-cost" class="govuk-heading-m"
                           th:text="|'${model.organisationName}' Total project costs|">'Bobs' Total project
                        costs</label>
                </div>
                <div class="govuk-grid-column-one-half alignright">
                    <input type="text"
                           id="total-cost"
                           readonly="readonly"
                           class="govuk-heading-m alignright"
                           data-calculation-fields=".cost-total"
                           data-calculation-operations="+"
                           th:value="'&pound;' + ${#numbers.formatInteger(form.organisationFinanceTotal, 0, 'DEFAULT')}"/>
                </div>
            </div>

            <div class="form-footer" th:if="${model.open}">
                <div class="form-footer__actions">
                    <button id="mark-all-as-complete" th:unless="${model.complete}" type="submit" name="complete"
                            class="button-clear" value="true">Mark as complete
                    </button>
                    <button th:if="${model.complete}" type="submit" name="edit" class="button-clear" value="true">
                        Edit your project costs
                    </button>
                </div>
            </div>
            <div>
                <a th:href="${model.financesUrl}"
                   th:if="${model.readOnly}"
                   class="govuk-!-margin-top-6 govuk-button govuk-button--secondary">Return to finances
                </a>
                <button type="submit" th:unless="${model.readOnly}"
                        class="govuk-!-margin-top-6 govuk-button">
                    Save and return to project finances
                </button>
            </div>
        </form>

        <th:block th:insert="fragments/layout :: main-content-end"/>
    </main>
</div>
<th:block th:insert="fragments/layout :: footer"/>
<th:block th:insert="fragments/layout :: body-end"/>
<th:block th:insert="fragments/service-layout :: body-end"/>
</body>
</html>
