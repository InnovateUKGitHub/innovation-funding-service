<!DOCTYPE html>
<html lang="en" class="govuk-template" xmlns:th="http://www.thymeleaf.org" xmlns:ifs="http://www.w3.org/1999/xhtml">

<th:block th:fragment="print(model)">
    <th:block th:each="section, sectionIter : ${model.sections}">
        <section th:classappend="${section.finances ? 'landscape' : 'portrait'}">
            <h2 th:text="${section.name}"
                class="govuk-heading-m govuk-!-margin-top-8 govuk-!-margin-bottom-0"/>
            <div class="question" th:each="question, questionIter : ${section.questions}">
                <th:block th:insert="application/readonly/question-read-only :: ${question.fragment} (${question})"/>
            </div>
        </section>
    </th:block>
</th:block>

<th:block th:fragment="accordion(model)">
    <th:block th:each="section, sectionIter : ${model.sections}">
        <section th:if="${section.name == 'Finances'}">
            <h2 th:text="${section.name}"
                class="govuk-heading-m govuk-!-margin-top-8 govuk-!-margin-bottom-0"/>
            <!--/* Show the accordion sections */-->
            <div class="govuk-accordion" data-module="govuk-accordion" th:id="|accordion-questions-${sectionIter.count}|">
                <div class="govuk-accordion__section"  th:each="question, questionIter : ${section.questions}">
                    <div class="govuk-accordion__section-header">
                        <h2 class="govuk-accordion__section-heading">
                            <span class="govuk-accordion__section-button" th:id="|accordion-questions-heading-${sectionIter.count}-${questionIter.count}|">
                                <th:block th:text="${question.name}"></th:block>
                            </span>
                            <th:block th:if="${model.settings.includeStatuses}">
                                <div th:if="${question.isComplete() and question.displayCompleteStatus}" class="section-status section-complete">Complete</div>
                                <div th:unless="${question.isComplete()}" class="section-status section-incomplete">Incomplete</div>
                            </th:block>
                        </h2>
                    </div>
                    <div th:id="|accordion-questions-content-${sectionIter.count}-${questionIter.count}|" class="govuk-accordion__section-content" th:aria-labelledby="|accordion-questions-heading-${sectionIter.count}-${questionIter.count}|">
                        <th:block
                            th:insert="application/readonly/question-read-only :: ${question.fragment} (${question})"/>

                        <form th:action="@{${#ifsUtil.formPostUri(#httpServletRequest)}}" novalidate="novalidate"
                              method="post"
                              th:if="${model.settings.includeQuestionLinks && question.shouldDisplayActions()}">

                            <div class="form-footer govuk-!-margin-top-6">
                                <button class="govuk-button button-clear"
                                        type="submit"
                                        name="complete"
                                        th:if="${question.shouldDisplayMarkAsComplete()}"
                                        th:value="${question.questionId}">
                                    Mark as complete
                                </button>
                                <button class="govuk-button button-clear"
                                        type="submit"
                                        name="assign"
                                        th:unless="${question.lead || question.complete}"
                                        th:value="${question.questionId}">
                                    Assign to lead for review
                                </button>
                                <button class="govuk-button button-clear"
                                        type="submit"
                                        th:name="${question.complete ? 'incomplete' : 'edit'}"
                                        th:value="${question.questionId}">
                                    Return and edit
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </th:block>
</th:block>

<th:block th:fragment="something(model)">
    <!--<section th:each="section : ${model.sections.values()}" th:unless="${section.name.equals('Finances') or section.name.equals('Terms and conditions')}">-->
        <!--<th:block th:if="${section.name.equals('Project details')}">-->
            <!--<ul class="govuk-list list-overview govuk-!-margin-top-6">-->
                <!--<th:block th:each="question : ${model.sectionQuestions.get(section.id)}" th:unless="${question.questionSetupType == T(org.innovateuk.ifs.question.resource.QuestionSetupType).APPLICATION_DETAILS}">-->
                    <!--<li class="section-status">-->
                        <!--<div class="govuk-grid-row">-->
                            <!--<div class="govuk-grid-column-two-thirds">-->
                                <!--<h3 class="govuk-heading-s">-->
                                    <!--<a th:href="@{/application/{apId}/question/{qId}/feedback(apId=${model.application.id},qId=${question.id})}"-->
                                       <!--th:text="${question.shortName}"-->
                                       <!--class="govuk-link">Project summary</a>-->
                                <!--</h3>-->
                            <!--</div>-->
                            <!--<div class="govuk-grid-column-one-third">-->
                                <!--<th:block th:if="${question.questionSetupType == T(org.innovateuk.ifs.question.resource.QuestionSetupType).SCOPE}">-->
                                    <!--<p th:unless="${model.scores.scopeAssessed}" class="govuk-body govuk-hint govuk-!-margin-0">No feedback provided</p>-->
                                    <!--<p class="govuk-body" th:if="${model.scores.scopeAssessed}">-->
                                        <!--In scope? <span th:text="${model.scores.inScope}">4</span>/<span th:text="${model.scores.totalScope}">5</span>-->
                                    <!--</p>-->
                                <!--</th:block>-->
                                <!--<th:block th:unless="${question.questionSetupType == T(org.innovateuk.ifs.question.resource.QuestionSetupType).SCOPE}">-->
                                    <!--<p class="govuk-hint govuk-!-margin-0">No feedback provided</p>-->
                                <!--</th:block>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</li>-->
                <!--</th:block>-->
            <!--</ul>-->
        <!--</th:block>-->

        <!--<th:block th:if="${!section.name.equals('Project details')}">-->
            <!--<h2 class="govuk-heading-m govuk-!-margin-bottom-0 govuk-!-margin-top-9">Application questions</h2>-->
            <!--<p class="govuk-body govuk-hint">Each question has been assessed by several independent assessors. They have given a score and feedback for each.</p>-->

            <!--<ul class="govuk-list list-overview">-->
                <!--<li class="section-status" th:each="question : ${model.sectionQuestions.get(section.id)}">-->
                    <!--<div class="govuk-grid-row">-->
                        <!--<div class="govuk-grid-column-two-thirds">-->
                            <!--<h3 class="govuk-heading-s">-->
                                <!--<a th:href="@{/application/{apId}/question/{qId}/feedback(apId=${model.application.id},qId=${question.id})}"-->
                                   <!--th:text="${question.questionNumber!=null ? question.questionNumber + '. ' : '' } + ${question.shortName}"-->
                                   <!--class="govuk-link">1. Business opportunity</a>-->
                            <!--</h3>-->
                        <!--</div>-->
                        <!--<div>-->
                            <!--<div class="govuk-grid-column-one-third" th:text="|Average score ${model.scores.scores.get(question.id)} / ${question.assessorMaximumScore}|">Average score 7 / 10</div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</li>-->
            <!--</ul>-->
            <!--<div class="govuk-grid-row govuk-!-margin-top-6">-->
                <!--<div class="govuk-grid-column-two-thirds">-->
                    <!--&nbsp;-->
                <!--</div>-->
                <!--<div class="govuk-grid-column-one-third">-->
                    <!--<p class="govuk-body">Average overall: <strong class="heading-" th:text="|${model.scores.averagePercentage}%|">70%</strong></p>-->
                <!--</div>-->
            <!--</div>-->
        <!--</th:block>-->
    <!--</section>-->

    <!--<th:block th:if="${model.interviewFeedbackViewModel != null && model.interviewFeedbackViewModel.hasFeedback()}">-->
        <!--<h2 class="govuk-heading-m govuk-!-margin-top-6">Additional feedback</h2>-->
        <!--<div class="govuk-form-group download">-->
            <!--<h3 class="govuk-heading-s govuk-!-margin-0">Additional Innovate UK feedback</h3>-->
            <!--<a target="_blank"-->
               <!--th:href="@{/application/{applicationId}/feedback/download-feedback(applicationId=${model.application.id})}"-->
               <!--th:text="|${model.interviewFeedbackViewModel.feedbackFilename} (opens in a new window)|"-->
               <!--class="govuk-link">panel-assessment-feedback.pdf, 6 KB </a>.-->
        <!--</div>-->
    <!--</th:block>-->

<!--    <section th:if="${model.hasFinanceSection}">-->
<!--        <h2 class="govuk-heading-m govuk-!-margin-top-8 govuk-!-margin-bottom-0">Finance</h2>-->
<!--        <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-finance">-->
<!--            <div class="govuk-accordion__section">-->
<!--                <div class="govuk-accordion__section-header">-->
<!--                    <h3 class="govuk-accordion__section-heading">-->
<!--                                    <span class="govuk-accordion__section-button" id="accordion-finance-heading-1">-->
<!--                                        Finances summary-->
<!--                                    </span>-->
<!--                    </h3>-->
<!--                </div>-->
<!--                <div id="accordion-finance-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-finance-heading-1">-->
<!--                    <div th:replace="finance/finance-summary :: application-finances-summary(${model.applicationFinanceSummaryViewModel})"></div>-->
<!--                    <h4 class="govuk-heading-m">Funding breakdown</h4>-->
<!--                    <th:block th:insert="finance/finance-summary :: finance-breakdown-table(${model.applicationFundingBreakdownViewModel})" />-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </section>-->
</th:block>

<th:block th:fragment="assessor_feedback(model)">
    <div th:if="!${#lists.isEmpty(model.feedback)}">
        <h2 class="govuk-heading-m govuk-!-margin-top-9">Assessor feedback</h2>
        <ul class="govuk-list boxed-list">
            <li th:each="item, iterStat : ${model.feedback}">
                <h3 class="govuk-heading-s" th:text="|Assessor ${iterStat.count}|">Assessor 1</h3>
                <div th:text="${item}" data-text-to-html="" class="govuk-body wysiwyg-styles">Feedback text</div>
            </li>
        </ul>
    </div>
</th:block>

</html>
