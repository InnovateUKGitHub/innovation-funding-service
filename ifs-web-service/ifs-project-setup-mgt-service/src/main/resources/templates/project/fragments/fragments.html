<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="bankDetailsStatus(statusName)">
  <th:block th:switch="${statusName}">
    <div th:case="'NOT_REQUIRED'" class="task-status"><span>No action required</span></div>
    <div th:case="'NOT_STARTED'" class="notification">Not yet submitted</div>
    <div th:case="'ACTION_REQUIRED'" class="action-required"><strong>Review required</strong></div>
    <div th:case="'PENDING'" class="notification">Pending</div>
    <div th:case="'COMPLETE'" class="task-status-complete"><span>Complete</span></div>
  </th:block>
</th:block>

<th:block th:fragment="project-dashboard-navigation(selectedTab, competitionId, openQueryCount, pendingSpendProfilesCount, showAllTabs, isExternalFinanceUser, isIfsAdmin)">
    <div class="alignright">
        <a class="govuk-link alignright"
           th:if="${isIfsAdmin}"
           th:href="@{~/management/competition/setup/{competitionId}(competitionId=${competitionId})}">View and update competition details</a>
        <span th:if="${isIfsAdmin}">|</span>
        <a class="govuk-link alignright"
           th:unless="${isExternalFinanceUser}"
           th:href="@{~/management/competition/{competitionId}/previous(competitionId=${competitionId})}">View only completed projects for this competition</a>
    </div>
    <ul class="govuk-tabs__list">
        <li id="section-1"
            class="govuk-tabs__list-item"
            th:classappend="${selectedTab == 'all'} ? 'govuk-tabs__list-item--selected' : ''">
            <a th:href="@{/competition/{competitionId}/status/all(competitionId=${competitionId})}"
               class="govuk-tabs__tab">All projects</a>
        </li>
        <li th:if="${showAllTabs}"
            id="section-2"
            class="govuk-tabs__list-item"
            th:classappend="${selectedTab == 'queries'} ? 'govuk-tabs__list-item--selected' : ''">
            <a th:href="@{/competition/{competitionId}/status/queries(competitionId=${competitionId})}"
               th:text="'Queries (' + ${openQueryCount} + ')'"
               class="govuk-tabs__tab"></a>
        </li>
        <li th:if="${showAllTabs}"
            id="section-3"
            class="govuk-tabs__list-item"
            th:classappend="${selectedTab == 'spend-profile'} ? 'govuk-tabs__list-item--selected' : ''">
            <a th:href="@{/competition/{competitionId}/status/pending-spend-profiles(competitionId=${competitionId})}"
               th:text="'Generate spend profile (' + ${pendingSpendProfilesCount} + ')'"
               class="govuk-tabs__tab"></a>
        </li>
    </ul>
</th:block>

<th:block th:fragment="review-document-radio-buttons">
    <h2 class="govuk-heading-m govuk-!-margin-top-6">Review document</h2>
    <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
            <legend id="radio-review" class="govuk-fieldset__legend govuk-fieldset__legend--s">
            </legend>
            <div class="govuk-radios">
                <div class="govuk-radios__item">
                    <input class="govuk-radios__input"
                           id="radio-review-approve"
                           name="approved"
                           type="radio"
                           value="true"
                           required="required"
                           data-switches-button-status="#submit-button"
                           data-switches-modal-target="#submit-button"
                           data-switches-modal-target-value="modal-accept-configured-doc">
                    <label class="govuk-label govuk-radios__label" for="radio-review-approve">
                        Approve
                    </label>
                </div>
                <div class="govuk-radios__item" data-target="reject-document-panel">
                    <input class="govuk-radios__input"
                           id="radio-review-reject"
                           name="approved"
                           type="radio"
                           value="false"
                           required="required"
                           data-switches-modal-target="#submit-button"
                           data-switches-modal-target-value="modal-reject-configured-doc">
                    <label class="govuk-label govuk-radios__label" for="radio-review-reject">
                        Reject
                    </label>
                </div>
            </div>
        </fieldset>
        <th:block th:insert="project/fragments/fragments :: review-document-rejection-reason" />
    </div>

    <button class="govuk-button" type="submit" id="submit-button" data-js-modal="" data-enable-button-when="one-checked">Submit</button>
</th:block>

<th:block th:fragment="review-document-rejection-reason">
    <div class="panel js-hidden govuk-!-margin-top-4" id="reject-document-panel">
        <div class="govuk-form-group">
            <label for="document-reject-reason"
                   class="govuk-label govuk-label--s">
                Reason for rejection
            </label>
            <p class="govuk-hint">This will not be visible to the applicant.</p>
            <textarea
                    class="govuk-textarea"
                    id="document-reject-reason"
                    name="rejectionReason"
                    th:errorclass="govuk-textarea--error"
                    required="required"
                    maxlength="255"
                    rows="3"
                    data-switches-button-status="#submit-button">
                </textarea>
        </div>
    </div>
</th:block>

<th:block th:fragment="ktp-gol-finance-row(path)">
    <td style="text-align:right;" th:text="${__${path}__.cost}"></td>
    <td style="text-align:right;" th:text="${__${path}__.contribution}"></td>
    <td style="text-align:right;" th:text="${__${path}__.funding}"></td>
</th:block>

</html>
