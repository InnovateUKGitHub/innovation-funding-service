<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:ifs="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>
        Print version with CSS
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0b0c0c" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
<main>
    <style>
        @media print {
            .letter-size {
                padding: 4em;
            }
            .letter-image {
                max-width: 12em;
                padding: 0 0 4em 0;
            }

        }

        .letter-logo {
            margin: 0 auto;
        }
        .letter-size,
        .letter-size * {
            font-family: "Arial", "Helvetica", sans-serif;
            /*font-size: 16px;*/
            font-size: 10pt;
        }
        .letter-image {
            /*max-width: 300px;*/
            padding: 0 0 60px 0;
        }

        .letter-table {
            border-collapse: collapse;
            max-width: 100%;
            font-size: 12px;
        }

        .letter-table th,
        .letter-table td {
            padding: 4px;
            border: 1px solid #000;
            text-align: left;
            font-size: 12px;
        }

        .letter-table strong {
            font-size: 12px;
        }

        .letter-table .letter-table--right {
            text-align: right;
        }
        .letter-list {

        }
        .letter-list li,
        .terms-and-conditions li {
            padding: 4px 0
        }

        .letter-size--terms,
        .letter-size--terms * {
            font-size: 10pt;
        }

        ol.list-alpha {
            counter-reset: item;
            padding: 15px 0;
        }
        ol.list-alpha li {
            display: block;
            padding: 10px 0 10px 45px;
            counter-increment: item;
        }
        ol.list-alpha li:before {
             position: absolute;
             content: counter(item, upper-alpha);
             margin-left:-45px; //negative of the ol li padding
        }

        ol.ifs-list--number {
            list-style-type: none;
            counter-reset: item;
            margin: 0;
            padding: 0;
        }
        ol.ifs-list--number > li {
            display: table;
            counter-increment: item;
            margin-bottom: 0.6em;
            font-weight: bold;
        }
        ol.ifs-list--number > li:before {
             content: counters(item, ".") ". ";
             display: table-cell;
             padding-right: 0.6em;
         }

        ol.ifs-list--number > li ol.ifs-list--number {
            list-style-type: none;
            counter-reset: item;
            margin: 0;
            padding: 0;
        }
        ol.ifs-list--number > li ol.ifs-list--number > li {
            margin: 0;
            font-weight: normal;
        }
        ol.ifs-list--number > li ol.ifs-list--number > li:before {
             content: counters(item, ".") " ";
        }

    </style>

    <div class="letter-size">
        <p>[Internal Guidance Note: This template has been produced for grants to UK organisations that apply to
            Horizon Europe calls open to third county participation. It must only be used where the Recipient’s
            project has an Horizon Europe Grant Agreement in place and has undergone UKRI’s due diligence to confirm
            eligibility under UKRI’s Horizon Europe Guarantee.]
        </p>

        <p><strong>Date:</strong> <th:block th:text="${#temporals.format(model.getNow(), 'd MMMM yyyy')}" /><br></p>
        <p>
            <th:block th:text="${model.projectManagerFirstName}" /> <th:block th:text="${model.projectManagerLastName}" /><br>
            <th:block th:text="${model.leadOrgName}" /><br>
            <th:block th:each="addressLine : ${model.projectAddress}">
                <th:block th:text="${addressLine}" /><br th:unless="${addressLine == ''}" />
            </th:block>
        </p>
        <p>
            <strong>UKRI Reference Number:</strong> <th:block th:text="${model.applicationId}" /><br>
            <strong>Project Title:</strong> <th:block th:text="${model.projectName}" /><br>
            <strong>Programme:</strong> Horizon Europe Guarantee<br>
        </p>
        <p>
            Dear <th:block th:text="${model.projectManagerFirstName}" />,
        </p>
        <p>
            Following your application to UKRI under the UK Government’s Horizon Europe Guarantee,
            we are pleased to inform you that your organisation has been deemed eligible to receive grant
            funding from UKRI, subject to the terms of this Grant Offer Letter.
        </p>
        <p>This Grant Offer Letter sets out the terms of the funding award between:</p>
        <br>
        <p>(1) United Kingdom Research and Innovation (“UKRI”), a statutory corporation whose registered office is at Polaris House, North Star Avenue, Swindon, England, SN2 1FL; and</p>
        <br>
        <p>(2) <th:block th:text="${model.projectManagerFirstName}" /> <th:block th:text="${model.projectManagerLastName}" />,
            <th:block th:each="addressLine : ${model.projectAddress}">
                <th:block th:text="${addressLine}" /><br th:unless="${addressLine == ''}" />
            </th:block>,
            <th:block th:if="${model.leadOrganisationNumber != null}" th:text="${model.leadOrganisationNumber}" />
            (the "Recipient").
        </p>
        <br>
        <p>Unless the context otherwise requires, capitalised expressions used in this Grant Offer Letter have the same meanings as set out in Annex 2 (Terms and Conditions of Grant).</p>
        <p>To confirm you wish to accept the grant funding on the terms set out in Annex 2, please complete and sign Annex 1 attached to this letter, then return it through the Innovation Funding Service.</p>
        <p>Acceptance includes confirming your project Start Date and End Date. Once your acceptance is approved these can only be changed by submitting a request through your Monitoring Officer.
            Annex 1 also details your individual award allocations. Subject to clause 5.4 of Annex 2, these are final and cannot be negotiated. This grant offer letter provides the maximum project costs which could be claimed under this award. All participants must make sure that project costs are incremental and directly attributable to the project. In signing this letter you confirm that evidence will be provided by the Recipient to support the eligibility of these costs with each claim made.</p>
        <p>Your award will be withdrawn if you do not confirm your start date within a calendar month of this letter. Any costs incurred before that start date will not be eligible for grant funding.</p>
        <p>We wish you every success with your project.</p>

        <table th:if="${not #lists.isEmpty(model.notes)}">
            <tr>
                <td style="padding:10px; border: 10px solid #c0c0c0;">
                    <h3>
                        <strong>Notes</strong>
                    </h3>
                    <ul class="letter-list">
                        <li th:each="note : ${model.notes}">
                            <p style="margin:4px 0;"><strong th:text="${note.title}"></strong></p>
                            <th:block th:each="(post : ${note.posts})">
                                <p style="margin:4px 0;" th:text="${post.body}">Content of the note.</p>
                            </th:block>
                        </li>
                    </ul>
                </td>
            </tr>
        </table>

        <p>Yours sincerely</p>
        <p>Barry Shaw<br>
            Deputy Director – Operations Delivery<br>
            <strong>
                Innovate UK, part of UK Research and Innovation
            </strong>
        </p>
        <div class="letter-page-break"></div>

        <h2 class="heading-medium">Annex 1: acceptance of award</h2>
        <p>
            <strong>UKRI Reference Number:</strong> <th:block th:text="${model.applicationId}" /><br>
            <strong>Date:</strong> <th:block th:text="${#temporals.format(model.getNow(), 'd MMMM yyyy')}" /><br>
            <strong>Competition:</strong> <th:block th:text="${model.competitionName}" /><br>
            <strong>Project title:</strong> <th:block th:text="${model.projectName}" />
        </p>

        <p>I am authorised on behalf of the Recipient to accept this offer on the terms set out in the Grant Offer Letter.</p>
        <p>For the purposes of the offer:</p>
        <p>
            (i) Project start date	______________________________________________ <br><br>
            (ii) Project end date	______________________________________________ <br>
        </p>

        <p>Please note: to make administration simpler, the project start date must be the first day of a calendar month. Please also make sure the project end date falls on the last day of a calendar month, by selecting an appropriate project length.</p>

        <br><br><br><br>

        <p>
            <strong>Signed for and on behalf of:</strong> ______________________________________________ <br><br>
        </p>

        <br><br>

        <p>
            <strong>Name:</strong> ______________________________________________ <br><br>
        </p>

        <br><br>

        <p>
            <strong>Position:</strong> ______________________________________________ <br><br>
        </p>

        <br><br>

        <p>
            <strong>Signature:</strong> ______________________________________________ <br><br>
        </p>

        <br><br>

        <p>
            <strong>Date:</strong> ______________________________________________ <br><br>

        </p>

        <h2 class="heading-medium">Eligible costs and grant allocations</h2>

        <p>
            <strong>File reference:</strong> [file_reference]<br>
            <strong>Application number:</strong> <th:block th:text="${model.applicationId}" /><br>
            <strong>Date:</strong> <th:block th:text="${#temporals.format(model.getNow(), 'd MMMM yyyy')}" /><br>
            <strong>Competition:</strong> <th:block th:text="${model.competitionName}" /><br>
            <strong>Project title:</strong> <th:block th:text="${model.projectName}" />
        </p>

        <th:block th:if="${model.industrialFinanceTable}">
            <table class="letter-table">
                <thead>
                    <tr>
                        <th>Industry costs</th>
                        <th style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:text="${organisation}">Super Tech Ltd</th>
                        <th style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}">Total (Industry)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Personnel costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getLabourFinanceRowType())}"
                               th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.industrialFinanceTable.getTotalForType(model.getLabourFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Subcontracting costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getSubContractingCostsFinanceRowType())}"
                                             th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.industrialFinanceTable.getTotalForType(model.getSubContractingCostsFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Travel and subsistence</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getTravelFinanceRowType())}"
                                             th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.industrialFinanceTable.getTotalForType(model.getTravelFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Equipment</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getMaterialsFinanceRowType())}"
                                      th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.industrialFinanceTable.getTotalForType(model.getMaterialsFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Other goods, works and services</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getCapitalUsageFinanceRowType())}"
                                      th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.industrialFinanceTable.getTotalForType(model.getCapitalUsageFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Other costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getOtherCostsFinanceRowType())}"
                                             th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.industrialFinanceTable.getTotalForType(model.getOtherCostsFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Indirect costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="category = ${model.isProcurement() ?
                            organisationFinance.getFinanceOrganisationDetails(model.getProcurementOverheadsFinanceRowType()) :
                            organisationFinance.getFinanceOrganisationDetails(model.getOverheadsFinanceRowType())}"
                                             th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}"
                            th:with="total=${model.isProcurement() ?
                            model.industrialFinanceTable.getTotalForType(model.getProcurementOverheadsFinanceRowType()) :
                            model.industrialFinanceTable.getTotalForType(model.getOverheadsFinanceRowType())}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <th:block th:if="${model.isProcurement()}">
                        <tr>
                            <td>VAT</td>
                            <td style="text-align:right;"
                                th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                                th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                                &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getVATFinanceRowType())}"
                                                 th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                            </td>
                            <td style="text-align:right;"
                                th:if="${model.industrialFinanceTable.showTotalsColumn}"
                                th:with="total=${model.industrialFinanceTable.getTotalForType(model.getVATFinanceRowType())}">
                                &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                            </td>
                        </tr>
                    </th:block>
                    <tr>
                        <th>Total eligible costs</th>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:text="${#numbers.formatInteger(organisationFinance.getTotal(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}">
                            &pound;<th:block th:text="${#numbers.formatInteger(model.industrialFinanceTable.getTotalEligibleCosts(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <th>Rate of grant (%)</th>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            <th:block th:text="${#numbers.formatDecimal(organisationFinance.getGrantClaimPercentage(),1,'DEFAULT',2,'DEFAULT')}">0%</th:block>&percnt;
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}">&ndash;
                        </td>
                    </tr>
                    <th:block th:if="${model.industrialFinanceTable.showOtherFundingRow()}">
                        <tr>
                            <th>Other public sector funding</th>
                            <td style="text-align:right;"
                                th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                                th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                                &pound;<th:block th:with="category = ${organisationFinance.getFinanceOrganisationDetails(model.getOtherFundingFinanceRowType())}"
                                                 th:text="${#numbers.formatInteger(category.total, 0, 'DEFAULT')}">£0</th:block>
                            </td>
                            <td style="text-align:right;"
                                th:if="${model.industrialFinanceTable.showTotalsColumn}"
                                th:with="total=${model.industrialFinanceTable.getTotalForType(model.getOtherFundingFinanceRowType())}">
                                &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                            </td>
                        </tr>
                    </th:block>
                    <tr>
                        <th>Total grant</th>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.industrialFinanceTable.organisations})"
                            th:with="organisationFinance=${model.industrialFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:text="${#numbers.formatInteger(organisationFinance.getTotalFundingSought(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.industrialFinanceTable.showTotalsColumn}">
                            &pound;<th:block th:text="${#numbers.formatInteger(model.industrialFinanceTable.getTotalGrant(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                </tbody>
            </table>
        </th:block>

        <th:block th:if="${model.academicFinanceTable}">
            <br><br><br>
            <table class="letter-table">
                <thead>
                    <tr>
                        <th colspan="2">Academic costs</th>
                        <th style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:text="${organisation}">University of Lincoln</th>
                        <th style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}">Totals</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="4">Total project costs</td>
                        <td>Staff</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'incurred_staff')}"
                                      th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('incurred-staff')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Travel and subsistence</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'incurred_travel_subsistence')}"
                                       th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('incurred_travel_subsistence')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Equipment</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'incurred_equipment')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('incurred_equipment')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Other costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'incurred_other_costs')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('incurred_other_costs')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>

                    <tr>
                        <td rowspan="3">Directly allocated</td>
                        <td>Investigators</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'allocated_investigators')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('allocated_investigators')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Estates</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'allocated_estates_costs')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('allocated_estates_costs')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Other DA</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'allocated_other_costs')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('allocated_other_costs')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>

                    <tr>
                        <td rowspan="">Indirect costs</td>
                        <td>Indirect costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'indirect_costs')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('indirect_costs')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>

                    <tr>
                        <td rowspan="4">Exceptions</td>
                        <td>Staff</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'exceptions_staff')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('exceptions_staff')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Travel and subsistence</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'exceptions_travel_subsistence')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('exceptions_travel_subsistence')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Equipment</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'exceptions_equipment')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('exceptions_equipment')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                    <tr>
                        <td>Other costs</td>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'exceptions_other_costs')}"
                                             th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}"
                            th:with="total=${model.academicFinanceTable.getTotalByName('exceptions_other_costs')}">
                            &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>

                    <tr>
                        <th colspan="2">Total eligible costs</th>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:text="${#numbers.formatInteger(organisationFinance.getTotal(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}">
                            &pound;<th:block th:text="${#numbers.formatInteger(model.academicFinanceTable.getTotalEligibleCosts(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>

                    <tr>
                        <th colspan="2">Rate of grant (%)</th>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            <th:block th:text="${#numbers.formatDecimal(organisationFinance.getGrantClaimPercentage(),1,'DEFAULT',2,'DEFAULT')}">0%</th:block>&percnt;
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}">&ndash;
                        </td>
                    </tr>
                    <th:block th:if="${model.academicFinanceTable.showOtherFundingRow()}">
                        <tr>
                            <th colspan="2">Other public sector funding</th>
                            <td style="text-align:right;"
                                th:each="(organisation : ${model.academicFinanceTable.organisations})"
                                th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                                &pound;<th:block th:with="categoryTotal = ${model.academicFinanceTable.getByOrgAndName(organisation, 'other_funding')}"
                                                 th:text="${#numbers.formatInteger(categoryTotal, 0, 'DEFAULT')}">£0</th:block>
                            </td>
                            <td style="text-align:right;"
                                th:if="${model.academicFinanceTable.showTotalsColumn}"
                                th:with="total=${model.academicFinanceTable.getTotalByName('other_funding')}">
                                &pound;<th:block th:text="${#numbers.formatInteger(total, 0, 'DEFAULT')}">£0</th:block>
                            </td>
                        </tr>
                    </th:block>

                    <tr>
                        <th colspan="2">Total grant</th>
                        <td style="text-align:right;"
                            th:each="(organisation : ${model.academicFinanceTable.organisations})"
                            th:with="organisationFinance=${model.academicFinanceTable.finances.get(organisation)}">
                            &pound;<th:block th:text="${#numbers.formatInteger(organisationFinance.getTotalFundingSought(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                        <td style="text-align:right;"
                            th:if="${model.academicFinanceTable.showTotalsColumn}">
                            &pound;<th:block th:text="${#numbers.formatInteger(model.academicFinanceTable.getTotalGrant(), 0, 'DEFAULT')}">£0</th:block>
                        </td>
                    </tr>
                </tbody>
            </table>
        </th:block>

        <th:block th:if="${model.summaryFinanceTable}">
            <br><br><br>
            <table class="letter-table">
                <thead>
                <tr>
                    <th>Summary</th>
                    <th style="text-align:right;">Totals </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Total eligible costs</td>
                    <td style="text-align:right;">
                        &pound;<th:block th:text="${#numbers.formatInteger(model.summaryFinanceTable.totalEligibleCosts, 0, 'DEFAULT')}" /></td>
                </tr>
                <tr>
                    <td>Rate of grant (%)</td>
                    <td style="text-align:right;">
                        <th:block th:text="${#numbers.formatDecimal(model.summaryFinanceTable.totalGrantPercentage,1,'DEFAULT',2,'DEFAULT')}" />&percnt;</td>
                </tr>
                <th:block th:if="${model.summaryFinanceTable.showOtherFundingRow()}">
                    <tr>
                        <td>Total other public sector funding</td>
                        <td style="text-align:right;">
                            &pound;<th:block th:text="${#numbers.formatInteger(model.summaryFinanceTable.totalOtherFunding, 0, 'DEFAULT')}" /></td>
                    </tr>
                </th:block>
                <tr>
                    <td>Total grant</td>
                    <td style="text-align:right;">
                        &pound;<th:block th:text="${#numbers.formatInteger(model.summaryFinanceTable.totalProjectGrant, 0, 'DEFAULT')}" /></td>
                </tr>

                </tbody>
            </table>
        </th:block>

        <br><br><br>
    </div>
    <!-- terms start -->
    <div class="terms-and-conditions letter-size letter-size--terms">
        <th:block th:if="${model.singleTermsAndConditionsTemplatePresent}">
            <h2 style="font-size: 24px">Terms and conditions</h2>
            <th:block th:insert="competition/info/__${model.singleTermsAndConditionsTemplate}__ :: terms-and-conditions-content" th:with="hideProcurementLink=${true}"/>
        </th:block>
        <th:block th:unless="${model.singleTermsAndConditionsTemplatePresent}" th:each="termsTemplate : ${model.termsAndConditionsTemplates.entrySet()}">
            <h2 style="font-size: 24px">Terms and conditions (<th:block th:text="${termsTemplate.key}" />)</h2>
            <th:block th:insert="competition/info/__${termsTemplate.value}__ :: terms-and-conditions-content" th:with="hideProcurementLink=${true}"/>
        </th:block>
    </div>
    <!-- terms end  -->
</main>
</body>
</html>
