 <!DOCTYPE html>
<html  class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle=|Previous applications - ${model.competitionName}|" />
</head>

<body class="wide-page">
    <th:block th:insert="fragments/modals :: modal-overlay" />
    <th:block th:insert="fragments/layout :: body-start" />
    <th:block th:insert="fragments/layout :: global-header" />

<main tabindex="-1" id="content">
    <th:block th:insert="fragments/layout :: header-sub" th:with="linkTitle='Previous competitions',linkClass='link-back',linkUrl=@{/dashboard/previous}" />
    <th:block th:insert="fragments/layout :: page-title" th:with="pageTitle='Previous applications',subTitle=|${model.competitionId}: ${model.competitionName}|,size='heading-xlarge'" />


    <div class="grid-row sorting">
        <div class="column-full">
            <span class="heading-xlarge no-margin" th:text="${model.unsuccessfulApplicationsSize}">6</span>
            <span class="heading-small">applications</span>
        </div>
    </div>
    <div class="table-overflow">
        <table id="application-list">
            <thead>
            <tr>
                <th scope="col">Application number</th>
                <th scope="col">Project title</th>
                <th scope="col">Lead organisation</th>
                <th scope="col" th:colspan="${model.ifsAdmin ? '2' : '1'}">Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row, iterStat : ${model.unsuccessfulApplications}">
                <td>
                    <a th:href="@{'/competition/' + ${row.competition} + '/application/' + ${row.id} + ${originQuery}}" th:text="${row.id}">124</a>
                </td>
                <td th:text="${row.name}">Automated Project Title generator</td>
                <td th:text="${row.leadOrganisationName}">B.Systems</td>
                <td th:text="${#messages.msg('ifs.application.unsuccessful.' + row.applicationState.getStateName())}"
                    th:colspan="${model.ifsAdmin and (row.applicationState.getStateName() == 'REJECTED') ? '1' : '2'}">Not funded</td>
                <th:block th:if="${model.ifsAdmin and (row.applicationState.getStateName() == 'REJECTED')}">
                    <td class="alignright cta">
                        <a
                            data-js-modal="mark-as-successful-modal"
                            th:attr="data-modal-form-action=@{/competition/{cid}/applications/mark-successful/application/{aid}(cid=${row.competition}, aid=${row.id})}"
                            class="button button-secondary"
                            th:href="@{/competition/{cid}/applications/mark-successful/application/{aid}(cid=${row.competition}, aid=${row.id})}"> Mark as successful
                        </a>
                    </td>
                </th:block>
            </tr>
            </tbody>
        </table>
    </div>
    <th:block th:insert="fragments/competition-setup :: comp-setup-mark-as-successful-modal" />

    <th:block th:insert="fragments/elements :: general-pagination(pagination=${model.unsuccessfulApplicationsPagination})" />
    <th:block th:insert="fragments/layout :: main-content-end" />
</main>

<th:block th:insert="fragments/layout :: footer" />
<th:block th:insert="fragments/layout :: body-end" />
<th:block th:insert="fragments/service-layout :: body-end" />
</body>
</html>
