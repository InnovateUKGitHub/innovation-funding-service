<!-- =================Application question=========================== -->
<div th:fragment="application-question(question, editable)">
    <li th:id="${editable and (competitionSetupForm.questionToUpdate != null and competitionSetupForm.questionToUpdate.id == question.id) ? 'edit-question' : ''}" >
        <div class="grid-row">
            <div class="column-three-quarters">
                <h2 class="heading-medium" th:text="${question.number + '. ' + question.shortTitle}" />
            </div>
            <div class="column-quarter alignright" th:if="${editable and (competitionSetupForm.questionToUpdate == null or competitionSetupForm.questionToUpdate.id != question.id)}">
                <a th:href="@{/competition/setup/{competitionId}/section/application/question/{question}#edit-question(competitionId=${competition.id},question=${question.id})}" class="button button-secondary extra-margin">Edit</a>
            </div>
        </div>
        <th:block th:unless="${editable and (competitionSetupForm.questionToUpdate != null and competitionSetupForm.questionToUpdate.id == question.id)}">
            <div class="extra-margin-bottom">
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Question title</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:text="${question.title}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Question subtitle</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:if="${#strings.isEmpty(question.subTitle)}">None</p>
                        <p th:unless="${#strings.isEmpty(question.subTitle)}" th:text="${question.subTitle}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Guidance title</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:text="${question.guidanceTitle}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Guidance</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p ifs:utext="${question.guidance}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Words</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:text="${question.maxWords}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Appendix</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:if="${question.appendix}">Yes</p>
                        <p th:unless="${question.appendix}">No</p>
                    </div>
                </div>
            </div>
        </th:block>
        <th:block th:if="${editable and (competitionSetupForm.questionToUpdate != null and competitionSetupForm.questionToUpdate.id == question.id)}">
            <form method="post" th:object="${competitionSetupForm}" th:action="@{${question.id} + '#edit-question'}" novalidate="novalidate"
                  data-autosave="compSetup" data-th-attr="data-competition=${competition.id}, data-objectId=${question.id}" data-section="application">
                <input type="hidden"
                       th:name="questionToUpdate.id"
                       th:value="${question.id}" />
                <div class="question">
                    <div th:class="${#fields.hasErrors('questionToUpdate.title')}? 'form-group error':'form-group'">
                        <label class="form-label" for="question.title">
                            <span class="form-label-bold">Question title</span>
                            <span th:if="${#fields.hasErrors('questionToUpdate.title')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('questionToUpdate.title')}" th:text="${err}" />
                            </span>
                        </label>

                        <input th:class="${#fields.hasErrors('questionToUpdate.title') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="text"
                               required="required"
                               id="question.title"
                               th:name="questionToUpdate.title"
                               th:value="${question.title}"
                               maxlength="255"/>

                    </div>
                    <div th:class="${#fields.hasErrors('questionToUpdate.subTitle')}? 'form-group error':'form-group'">
                        <label class="form-label" for="question.subTitle">
                            <span class="form-label-bold">Question subtitle</span>
                            <span th:if="${#fields.hasErrors('questionToUpdate.subTitle')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('questionToUpdate.subTitle')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('questionToUpdate.subTitle') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="text"
                               id="question.subTitle"
                               th:name="questionToUpdate.subTitle"
                               th:value="${question.subTitle}"
                               maxlength="255"/>

                    </div>
                    <div th:class="${#fields.hasErrors('questionToUpdate.guidanceTitle')}? 'form-group error':'form-group'">
                        <label class="form-label" for="question.guidanceTitle">
                            <span class="form-label-bold">Question guidance title</span>
                            <span th:if="${#fields.hasErrors('questionToUpdate.guidanceTitle')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('questionToUpdate.guidanceTitle')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('questionToUpdate.guidanceTitle') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="text"
                               id="question.guidanceTitle"
                               required="required"
                               th:name="questionToUpdate.guidanceTitle"
                               th:value="${question.guidanceTitle}"
                               maxlength="255"/>
                    </div>
                    <div th:class="${#fields.hasErrors('questionToUpdate.guidance')}? 'form-group error':'form-group'">
                        <label class="form-label" for="question.guidance">
                            <span class="form-label-bold">Question guidance</span>
                            <span th:if="${#fields.hasErrors('questionToUpdate.guidance')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('questionToUpdate.guidance')}" th:text="${err}" />
                            </span>
                        </label>
                        <div class="textarea-wrapped ">
                            <textarea data-max_words="500"
                                      data-editor="html"
                                      id="question.guidance"
                                      th:class="${#fields.hasErrors('questionToUpdate.guidance') ? 'field-error' : ''}"
                                      th:name="questionToUpdate.guidance"
                                      required="required"
                                      ifs:utext="${question.guidance}">
                            </textarea>
                            <div class="textarea-footer">
                                  <span class="autosave-info"></span>
                            </div>
                        </div>

                    </div>
                    <div th:class="${#fields.hasErrors('questionToUpdate.maxWords')}? 'form-group error':'form-group'">
                        <label class="form-label" for="question.maxWords">
                            <span class="form-label-bold">Max word count</span>
                            <span th:if="${#fields.hasErrors('questionToUpdate.maxWords')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('questionToUpdate.maxWords')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('questionToUpdate.maxWords') ? 'form-control field-error width-medium' : 'form-control width-medium'}"
                               type="number"
                               id="question.maxWords"
                               min="1"
                               required="required"
                               th:name="questionToUpdate.maxWords"
                               th:value="${question.maxWords}"/>

                    </div>
                    <div class="grid-row">
                        <div class="column-half">
                            <div class="form-group">
                                <fieldset class="inline">
                                    <legend class="form-label-bold">Is the answer scored?</legend>
                                    <label class="block-label">
                                        <input th:name="questionToUpdate.scored" th:checked="${question.scored}" value="1" type="radio" />
                                        Yes
                                    </label>
                                    <label class="block-label">
                                        <input  th:name="questionToUpdate.scored" th:checked="${!question.scored}" value="0" type="radio" />
                                        No
                                    </label>

                                </fieldset>
                            </div>
                        </div>
                        <div class="column-half">
                            <div class="form-group">
                                <fieldset class="inline">
                                    <legend class="form-label-bold">Allow appendix?</legend>
                                    <label class="block-label">
                                        <input th:name="questionToUpdate.appendix" th:checked="${question.appendix}" value="1" type="radio" />
                                        Yes
                                    </label>
                                    <label class="block-label">
                                        <input th:name="questionToUpdate.appendix" th:checked="${!question.appendix}" value="0" type="radio" />
                                        No
                                    </label>

                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="alignright">
                    <input type="submit" class="button button-large" value="Save and close"/>
                </div>
            </form>
        </th:block>
    </li>
</div>
