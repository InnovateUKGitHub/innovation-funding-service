<!DOCTYPE html>
<html class="govuk-template" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Prototype index page'" />
    <link href="/css/prototype.css" media="screen" rel="stylesheet" type="text/css" />

</head>

<body class="govuk-template__body"
      th:with="edit=${param.status != null and param.status[0] == 'edit' ? TRUE : FALSE},
      section1=${param.section1 != null and param.section1[0] == 'true' ? TRUE : FALSE},
section2=${param.section2 != null and param.section2[0] == 'true' ? TRUE : FALSE},
section3=${param.section3 != null and param.section3[0] == 'true' ? TRUE : FALSE}">

<th:block th:insert="prototypes/fragments/layout :: prototype-nav" />
<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header" />

<div class="govuk-width-container">

    <th:block th:insert="prototypes/fragments/applicant-view :: prototype-subheader(${'Back'}, ${'/prototypes/IFS-4104-funding-dashboard?section1='} + ${section1} + '&#38;section2=' + ${section2} + '&#38;section3=' + ${section3})"/>

    <main class="govuk-main-wrapper" id="content">

        <!-- HARDCODED PROTOTYPE HTML -->

        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">

                <h1 class="govuk-heading-xl">
                    Project details
                </h1>

                <th:block th:unless="${param.status != null and param.status[0] == 'readonly'}">


                    <form class="govuk-form" th:action="${#httpServletRequest.requestURI}">

                        <fieldset class="govuk-fieldset">

                            <legend class="govuk-fieldset__legend">
                                Please provide details of your Horizon 2020 project.
                            </legend>

                            <p class="govuk-body">Make sure you have your grant agreement to hand before you start.
                                Enter precisely the right type of action, call name and identifier, topic identifier and
                                project name. These can also be found on the
                                <a href="http://ec.europa.eu/research/participants/portal/desktop/en/opportunities/index.html"
                                   class="govuk-link">Horizon 2020 website</a> (opens in a new window).
                            </p>

                            <input type="hidden" id="section1" name="section1" th:value="${section1}">
                            <input type="hidden" id="section2" name="section2" th:value="${section2}">
                            <input type="hidden" id="section3" name="section3" value="true">
                            <input type="hidden" id="status" name="status" value="readonly">

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="grant-agreement-number">
                                    Grant agreement number
                                </label>
                                <span id="grant-agreement-number-hint" class="govuk-hint">
                                    This might also be referred to as your project ID, agreement number or proposal ID.
                                </span>
                                <input class="govuk-input govuk-input--width-10" id="grant-agreement-number" name="grant-agreement-number" aria-describedby="grant-agreement-number-hint" type="text" th:value="${edit ? '123456' : ''}" required="required">
                            </div>

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="type-of-action">
                                    Type of action
                                </label>
                                <span id="type-of-action-hint" class="govuk-hint">
                                    Funding scheme
                                </span>
                                <select class="govuk-select govuk-!-width-three-quarters" name="type-of-action" id="type-of-action" aria-describedby="type-of-action-hint">
                                    <option selected="" th:value="${edit ? '(COFUND-EJP) COFUND (European Joint Programme)' : 'Select...'}" th:text="${edit ? '(COFUND-EJP) COFUND (European Joint Programme)' : 'Select...'}">Select...</option>
                                    <option value="(COFUND-EJP) COFUND (European Joint Programme)">(COFUND-EJP) COFUND (European Joint Programme)</option>
                                    <option value="(CSA) Coordination and support action">(CSA) Coordination and support action</option>
                                    <option value="(ERA-NET-Cofund) ERA-NET Cofund">(ERA-NET-Cofund) ERA-NET Cofund</option>
                                    <option value="(ERC-ADG) Advanced Grant">(ERC-ADG) Advanced Grant</option>
                                    <option value="(ERC-COG) Consolidator Grant">(ERC-COG) Consolidator Grant</option>
                                    <option value="(ERC-POC) Proof of Concept Grant">(ERC-POC) Proof of Concept Grant</option>
                                    <option value="(ERC-STG) Starting Grant">(ERC-STG) Starting Grant</option>
                                    <option value="(ERC-SyG) ERC Synergy Grant">(ERC-SyG) ERC Synergy Grant</option>
                                    <option value="(FP7) Framework Programme 7 ">(FP7) Framework Programme 7 </option>
                                    <option value="(FPA) Framework Partnership Agreement">(FPA) Framework Partnership Agreement</option>
                                    <option value="(FTI) Fast track to Innovation">(FTI) Fast track to Innovation</option>
                                    <option value="(IA) Innovation action">(IA) Innovation action</option>
                                    <option value="(IPr) Inducement Prize">(IPr) Inducement Prize</option>
                                    <option value="(KICS) Kics">(KICS) Kics</option>
                                    <option value="(MSCA Cofund) MSCA Cofund">(MSCA Cofund) MSCA Cofund</option>
                                    <option value="(MSCA) - MSCA-IF (Individual Fellowships)">(MSCA) - MSCA-IF (Individual Fellowships)</option>
                                    <option value="(MSCA-ITM) MSCA Innovative Training Networks">(MSCA-ITM) MSCA Innovative Training Networks</option>
                                    <option value="(MSCA-RISE) RISE (Research and Innovation Staff exchange)">(MSCA-RISE) RISE (Research and Innovation Staff exchange)</option>
                                    <option value="(PCP) Pre-Commercial Procurement">(PCP) Pre-Commercial Procurement</option>
                                    <option value="(PPI) Public Procurement of Innovative solutions">(PPI) Public Procurement of Innovative solutions</option>
                                    <option value="(RIA) Research and Innovation action">(RIA) Research and Innovation action</option>
                                    <option value="(RPr) Recognition Prize">(RPr) Recognition Prize</option>
                                    <option value="(SME-1) SME Instrument phase 1  ">(SME-1) SME Instrument phase 1&nbsp; </option>
                                    <option value="(SME-2) SME Instrument phase 2 ">(SME-2) SME Instrument phase 2 </option>
                                </select>
                            </div>

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="call-name">
                                    Call name
                                </label>
                                <span id="call-name-hint" class="govuk-hint">
                                    The call that your original proposal was in response to.
                                </span>
                                <input class="govuk-input govuk-!-width-three-quarters" id="call-name" name="call-name" type="text" aria-describedby="call-name-hint" th:value="${edit ? 'Industrialisation of artificial intelligence' : ''}" required="required">
                            </div>

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="call-id">
                                    Call identifier
                                </label>
                                <input class="govuk-input govuk-input--width-10" id="call-id" name="call-id" type="text" aria-describedby="call-id-hint" th:value="${edit ? 'HP-PJ-02-2018' : ''}" required="required">
                            </div>

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="topic-identifier">
                                    Topic identifier
                                </label>
                                <span id="topic-identifier-hint" class="govuk-hint">
                                    For example, AB-01-2018
                                </span>
                                <input class="govuk-input govuk-input--width-10" id="topic-identifier" name="topic-identifier" type="text" aria-describedby="topic-identifier-hint" th:value="${edit ? 'PJ-04-2018: Blockchain-EICPrize-2019' : ''}" required="required">
                            </div>


                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="project-name">
                                    Project name
                                </label>
                                <span id="project-name-hint" class="govuk-hint">
                                    The call that your original proposal was in response to.
                                </span>
                                <input class="govuk-input govuk-!-width-three-quarters" id="project-name" name="project-name" type="text" aria-describedby="project-name-hint" th:value="${edit ? 'My EU project name' : ''}" required="required">
                            </div>


                            <div class="govuk-form-group">
                                <fieldset class="govuk-fieldset">
                                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                                        Project start date
                                    </legend>
                                    <div class="date-group" data-past-date>
                                        <th:block th:insert="prototypes/IFS-4104-funding-details :: form-dateinput (id='application_details-startdate', field='application.startDate',readonly=${readonly}, dateType='data-past-date')" />
                                    </div>
                                </fieldset>
                            </div>

                            <div class="govuk-form-group">
                                <fieldset class="govuk-fieldset">
                                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                                        Project end date
                                    </legend>
                                    <div class="date-group" data-future-date>
                                        <th:block th:insert="prototypes/IFS-4104-funding-details :: form-dateinput (id='application_details-enddate', field='application.endDate',readonly=${readonly}, dateType='data-future-date')" />
                                    </div>
                                </fieldset>
                            </div>

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="funding-committed">
                                    EU funding contribution for above project (EUR)
                                </label>
                                <span id="funding-committed-hint" class="govuk-hint">
                                    This is the total amount in euros granted to your organisation at the point of the award for your project.
                                </span>
                                <span class="govuk-body govuk-!-padding-right-1">&euro;</span><input class="govuk-input govuk-input--width-10" id="funding-committed" name="funding-committed" type="text" aria-describedby="funding-committed-hint" th:value="${edit ? '&pound;100,000' : ''}" required="required">
                            </div>

                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-label--s" for="grant-agreement-number">
                                    Grant agreement number
                                </label>
                                <input class="govuk-input govuk-input--width-10" id="grant-agreement-number" name="grant-agreement-number" type="text" th:value="${edit ? '123456' : ''}" required="required">
                            </div>

                            <div class="govuk-form-group">
                                <fieldset class="govuk-fieldset">
                                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                                        Is your organisation the consortium lead on this project?
                                    </legend>
                                    <div class="govuk-radios" data-module="radios">
                                        <div class="govuk-radios__item">
                                            <input class="govuk-radios__input" id="consortium-lead-yes" name="consortium-lead" type="radio" value="yes" required="required">
                                            <label class="govuk-label govuk-radios__label" for="consortium-lead-yes">
                                                Yes
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item">
                                            <input class="govuk-radios__input" id="consortium-lead-no" name="consortium-lead" type="radio" value="no" th:checked="${edit}" required="required">
                                            <label class="govuk-label govuk-radios__label" for="consortium-lead-no">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            <button class="govuk-button govuk-!-margin-top-6" type="submit">Continue</button>

                        </fieldset>

                    </form>

                </th:block>

                <th:block th:if="${param.status != null and param.status[0] == 'readonly'}">
                    <dl class="govuk-list">
                        <dt class="govuk-!-margin-top-6">Grant agreement number</dt>
                        <dd>123456</dd>
                        <dt class="govuk-!-margin-top-6">Type of action</dt>
                        <dd>(COFUND-EJP) COFUND (European Joint Programme)</dd>
                        <dt>Call name</dt>
                        <dd>Industrialisation of artificial intelligence</dd>
                        <dt class="govuk-!-margin-top-6">Call identifier</dt>
                        <dd>My EU project name</dd>
                        <dt class="govuk-!-margin-top-6">Topic identifier</dt>
                        <dd>PJ-04-2018: Blockchain-EICPrize-2019</dd>
                        <dt class="govuk-!-margin-top-6">Project name</dt>
                        <dd>My EU project name</dd>
                        <dt class="govuk-!-margin-top-6">Project start date</dt>
                        <dd>August 2017</dd>
                        <dt class="govuk-!-margin-top-6">Project end date</dt>
                        <dd>March 2019</dd>
                        <dt class="govuk-!-margin-top-6">EU funding contribution for above project (EUR)</dt>
                        <dd>&euro;100,000</dd>
                        <dt class="govuk-!-margin-top-6">Is your organisation the project co-ordinator on this project?</dt>
                        <dd>Yes</dd>
                    </dl>

                    <p class="govuk-body govuk-!-margin-bottom-6">
                        <a class="govuk-link" th:href="${'/prototypes/IFS-4104-funding-details?status=edit&#38;section1=' + section1 + '&#38;section2=' + section2 + '&#38;section3=' + section3}">Edit funding details</a>
                    </p>

                    <a class="govuk-button" th:href="${'/prototypes/IFS-4104-funding-dashboard?section1=' + section1 + '&#38;section2=' + section2 + '&#38;section3=' + section3}">Save and return</a>

                </th:block>

            </div>
        </div>

        <!-- END OF HARDCODED PROTOTYPE HTML -->

        <th:block th:insert="fragments/layout :: main-content-end" />
    </main>

</div>

    <th:block th:insert="fragments/layout :: footer" />
    <th:block th:insert="fragments/layout :: body-end" />
    <script src="/js/ifs_prototype/prototype.js" type="text/javascript"></script>
    <script src="/js/ifs_prototype/tablesaw-init.js" type="text/javascript"></script>
    <script src="/js/ifs_prototype/tablesaw.stackonly.jquery.js" type="text/javascript"></script>

    <script type="text/javascript">
	// <![CDATA[

	// ]]>
    </script>

<th:block th:fragment="form-dateinput (id, field, dateType)">

    <th:block th:with="dateFieldPresent=*{__${field}__ != null}">

        <div class="day">
            <input type="hidden" name="day" th:id="${id}+'_day'" value="01">
        </div>
        <div class="month">
            <th:block th:insert="question-type/form-elements :: form-label (name='Month',id=${id}+'_month')" />
            <th:block th:if="${dateFieldPresent}">
                <th:block th:insert="question-type/form-elements :: form-number-extra-small (id=${id}+'_month', field=${field}+'.monthValue',placeholder='MM',required=true,min=1,max=12)" />
            </th:block>
            <th:block th:unless="${dateFieldPresent}">
                <th:block th:insert="question-type/form-elements :: form-number-extra-small-empty (id=${id}+'_month', field=${field}+'.monthValue',placeholder='MM',required=true,min=1,max=12)" />
            </th:block>
        </div>
        <div class="year">
            <th:block th:insert="question-type/form-elements :: form-label (name='Year',id=${id}+'_year')" />
            <th:block th:if="${dateFieldPresent}">
                <th:block th:insert="question-type/form-elements :: form-number-extra-small (id=${id}+'_year', field=${field}+'.year',placeholder='YYYY',required=true)" />
            </th:block>
            <th:block th:unless="${dateFieldPresent}">
                <th:block th:insert="question-type/form-elements :: form-number-extra-small-empty (id=${id}+'_year',field=${field}+'.year', placeholder='YYYY',required=true)" />
            </th:block>
        </div>
        <!--/* The hidden field below is used as a dummy value that is essentially ignored by the LocalDatePropertyEditor in order to allow
               us to get the LocalDatePropertyEditor to kick in when Spring attempts to bind the current field to the LocalDate value in the
               backing form.  So Spring sees this field being posted (by the name attribute), sees the variable backing this is a LocalDate,
               and then attempts to convert this value to a LocalDate.  At this point the LocalDatePropertyEditor throws this value away and
               explicitly looks for the <fieldName.dayOfMonth>, <fieldName.month> and <fieldName.year> parameters instead to construct the date */-->
        <input type="hidden" th:name="${field}" th:id="${id}" th:value="${field}" />

    </th:block>

</th:block>


</body>

</html>

