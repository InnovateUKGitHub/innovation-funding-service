apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonAnnotations:
  deployedWith: kustomize
  environment: at

bases:
  - ../env-base

components:
  - ../../components/robot
  - ../../components/mail
  - ../../components/sil-stub

  - ../../patches/health-check-patch
  - ../../patches/new-relic-env-vars-patch
  - ../../patches/pull-secrets-patch
  - ../../patches/spring-profile-patch
  - ../../patches/wait-for-db-patch

resources:
  - routes/idp-route.yml
  - routes/shib-route.yml
  - routes/mail-route.yml

  - storage/gluster.yml
  - storage/gluster-ep.yml
  - storage/persistent-volume-claim.yml

  - mysql/finance-totals-mysql-deployment.yml
  - mysql/finance-totals-mysql-service.yml
  - mysql/survey-mysql-deployment.yml
  - mysql/survey-mysql-service.yml
  - auth/idp/shibboleth-config.yml

  - web-config.yml
