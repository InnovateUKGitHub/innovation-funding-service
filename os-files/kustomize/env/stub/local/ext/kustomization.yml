commonAnnotations:
  deployedWith: kustomize
  environment: local

bases:
  - ../../stub-base

components:

  - ../../../../components/auth
  - ../../../../components/cache-provider
  - ../../../../components/ifs-database
  - ../../../../components/sil-stub
  - ../../../../components/mail

  - ../../../../patches/new-relic-env-vars-patch
  - ../../../../patches/pull-secrets-patch
  - ../../../../patches/spring-profile-patch
  - ../../../../patches/wait-for-db-patch

resources:
  - config-maps/spring-config.yml

  - secrets/ldap-keys-secrets.yml
  - secrets/sp-keys-secrets.yml
  - secrets/idp-keys-secrets.yml
  - secrets/sp-secrets.yml

#  - storage/persistent-volume-claim.yml
#  - storage/persistent-volume.yml

  - config-maps/idp-config.yml
  - config-maps/ldap-config.yml
  - config-maps/shibboleth-config.yml
  - config-maps/web-config.yml


patchesStrategicMerge:
  - auth/registration-service/registration-deployment.yml
  - sil-stub/sil-stub-deployment.yml
  - mail/mail-config.yml
  - auth/idp/idp.yml
  - auth/sp/sp.yml