apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonAnnotations:
  deployedWith: kustomize
  environment: custom

components:
  - ../../../components/sba
  - ../../../components/clamav
  - ../../../components/mail
  - ../../../components/sil-stub
  - ../../../components/ifs-database
  - ../../../components/cache-provider
  - ../../../components/file-storage-service
  - ../../../components/registration-service
  - ../../../components/data-layer
  - ../../../components/web-layer

  - ../../../patches/new-relic-env-vars-patch
  - ../../../patches/pull-secrets-patch
  - ../../../patches/spring-profile-patch

resources:
  - ../../../config-mgmt/env/aws/custom
  - routes/mail-route.yml
  - routes/sba-route.yml
  - routes/fss-route.yml
  - storage/gluster.yml
  - storage/gluster-ep.yml
  - storage/persistent-volume-claim.yml
  - rbac/sba-rbac.yml

patchesStrategicMerge:
  - registration-service/registration-deployment.yml