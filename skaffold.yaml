apiVersion: skaffold/v2beta10
kind: Config
metadata:
  name: innovation-funding-service
build:
  artifacts:
    - image: data-service
      context: .
      jib:
        type: gradle
        project: ifs-data-layer:ifs-data-service
        args:
          - "-DskipTests"
    - image: finance-data-service
      context: .
      jib:
        type: gradle
        project: ifs-data-layer:ifs-finance-data-service
        args:
          - "-DskipTests"
    - image: survey-data-service
      context: .
      jib:
        type: gradle
        project: ifs-data-layer:ifs-survey-data-service
        args:
          - "-DskipTests"
    - image: data-service-alerts
      context: .
      jib:
        type: gradle
        project: ifs-data-layer:data-service-alerts
        args:
          - "-DskipTests"
    - image: survey-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-survey-service
        args:
          - "-DskipTests"
    - image: project-setup-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-project-setup-service
        args:
          - "-DskipTests"
    - image: project-setup-mgt-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-project-setup-mgt-service
        args:
          - "-DskipTests"
    - image: front-door-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-front-door-service
        args:
          - "-DskipTests"
    - image: competition-mgt-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-competition-mgt-service
        args:
          - "-DskipTests"
    - image: assessment-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-assessment-service
        args:
          - "-DskipTests"
    - image: application-service
      context: .
      jib:
        type: gradle
        project: ifs-web-service:ifs-application-service
        args:
          - "-DskipTests"
    - image: registration-service
      context: .
      jib:
        type: gradle
        project: ifs-registration-service
        args:
          - "-DskipTests"
    - image: sil-stub
      context: .
      jib:
        type: gradle
        project: ifs-sil-stub
        args:
          - "-DskipTests"
  local:
    useDockerCLI: true
    useBuildkit: false
    tryImportMissing: true
    push: true
#deploy:
#  statusCheckDeadlineSeconds: 600
#  kustomize:
#    paths:
#      - os-files/kustomize/overlays/local
profiles:
  - name: tmp
    build:
      artifacts:
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: tmp
      kustomize:
        paths:
          - os-files/kustomize/overlays/tmp
  - name: at
    build:
      artifacts:
        - image: robot-framework
          context: robot-tests
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
        - image: finance-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-finance-data-service
            args:
              - "-DskipTests"
        - image: survey-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-survey-data-service
            args:
              - "-DskipTests"
        - image: data-service-alerts
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:data-service-alerts
            args:
              - "-DskipTests"
        - image: survey-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-survey-service
            args:
              - "-DskipTests"
        - image: project-setup-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-service
            args:
              - "-DskipTests"
        - image: project-setup-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-mgt-service
            args:
              - "-DskipTests"
        - image: front-door-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-front-door-service
            args:
              - "-DskipTests"
        - image: competition-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-competition-mgt-service
            args:
              - "-DskipTests"
        - image: assessment-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-assessment-service
            args:
              - "-DskipTests"
        - image: application-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-application-service
            args:
              - "-DskipTests"
        - image: registration-service
          context: .
          jib:
            type: gradle
            project: ifs-registration-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: at
      kustomize:
        paths:
          - os-files/kustomize/overlays/at

  - name: sysint
    build:
      artifacts:
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
        - image: finance-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-finance-data-service
            args:
              - "-DskipTests"
        - image: survey-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-survey-data-service
            args:
              - "-DskipTests"
        - image: data-service-alerts
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:data-service-alerts
            args:
              - "-DskipTests"
        - image: survey-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-survey-service
            args:
              - "-DskipTests"
        - image: project-setup-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-service
            args:
              - "-DskipTests"
        - image: project-setup-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-mgt-service
            args:
              - "-DskipTests"
        - image: front-door-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-front-door-service
            args:
              - "-DskipTests"
        - image: competition-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-competition-mgt-service
            args:
              - "-DskipTests"
        - image: assessment-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-assessment-service
            args:
              - "-DskipTests"
        - image: application-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-application-service
            args:
              - "-DskipTests"
        - image: registration-service
          context: .
          jib:
            type: gradle
            project: ifs-registration-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: sysint
      kustomize:
        paths:
          - os-files/kustomize/overlays/sysint

  - name: uat
    build:
      artifacts:
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
        - image: finance-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-finance-data-service
            args:
              - "-DskipTests"
        - image: survey-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-survey-data-service
            args:
              - "-DskipTests"
        - image: data-service-alerts
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:data-service-alerts
            args:
              - "-DskipTests"
        - image: survey-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-survey-service
            args:
              - "-DskipTests"
        - image: project-setup-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-service
            args:
              - "-DskipTests"
        - image: project-setup-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-mgt-service
            args:
              - "-DskipTests"
        - image: front-door-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-front-door-service
            args:
              - "-DskipTests"
        - image: competition-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-competition-mgt-service
            args:
              - "-DskipTests"
        - image: assessment-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-assessment-service
            args:
              - "-DskipTests"
        - image: application-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-application-service
            args:
              - "-DskipTests"
        - image: registration-service
          context: .
          jib:
            type: gradle
            project: ifs-registration-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: uat
      kustomize:
        paths:
          - os-files/kustomize/overlays/uat

  - name: demo
    build:
      artifacts:
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
        - image: finance-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-finance-data-service
            args:
              - "-DskipTests"
        - image: survey-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-survey-data-service
            args:
              - "-DskipTests"
        - image: data-service-alerts
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:data-service-alerts
            args:
              - "-DskipTests"
        - image: survey-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-survey-service
            args:
              - "-DskipTests"
        - image: project-setup-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-service
            args:
              - "-DskipTests"
        - image: project-setup-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-mgt-service
            args:
              - "-DskipTests"
        - image: front-door-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-front-door-service
            args:
              - "-DskipTests"
        - image: competition-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-competition-mgt-service
            args:
              - "-DskipTests"
        - image: assessment-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-assessment-service
            args:
              - "-DskipTests"
        - image: application-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-application-service
            args:
              - "-DskipTests"
        - image: registration-service
          context: .
          jib:
            type: gradle
            project: ifs-registration-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: demo
      kustomize:
        paths:
          - os-files/kustomize/overlays/demo

  - name: perf
    build:
      artifacts:
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
        - image: finance-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-finance-data-service
            args:
              - "-DskipTests"
        - image: survey-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-survey-data-service
            args:
              - "-DskipTests"
        - image: data-service-alerts
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:data-service-alerts
            args:
              - "-DskipTests"
        - image: survey-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-survey-service
            args:
              - "-DskipTests"
        - image: project-setup-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-service
            args:
              - "-DskipTests"
        - image: project-setup-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-mgt-service
            args:
              - "-DskipTests"
        - image: front-door-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-front-door-service
            args:
              - "-DskipTests"
        - image: competition-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-competition-mgt-service
            args:
              - "-DskipTests"
        - image: assessment-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-assessment-service
            args:
              - "-DskipTests"
        - image: application-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-application-service
            args:
              - "-DskipTests"
        - image: registration-service
          context: .
          jib:
            type: gradle
            project: ifs-registration-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: perf
      kustomize:
        paths:
          - os-files/kustomize/overlays/perf

  - name: prod
    build:
      artifacts:
        - image: data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-data-service
            args:
              - "-DskipTests"
        - image: finance-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-finance-data-service
            args:
              - "-DskipTests"
        - image: survey-data-service
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:ifs-survey-data-service
            args:
              - "-DskipTests"
        - image: data-service-alerts
          context: .
          jib:
            type: gradle
            project: ifs-data-layer:data-service-alerts
            args:
              - "-DskipTests"
        - image: survey-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-survey-service
            args:
              - "-DskipTests"
        - image: project-setup-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-service
            args:
              - "-DskipTests"
        - image: project-setup-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-project-setup-mgt-service
            args:
              - "-DskipTests"
        - image: front-door-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-front-door-service
            args:
              - "-DskipTests"
        - image: competition-mgt-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-competition-mgt-service
            args:
              - "-DskipTests"
        - image: assessment-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-assessment-service
            args:
              - "-DskipTests"
        - image: application-service
          context: .
          jib:
            type: gradle
            project: ifs-web-service:ifs-application-service
            args:
              - "-DskipTests"
        - image: registration-service
          context: .
          jib:
            type: gradle
            project: ifs-registration-service
            args:
              - "-DskipTests"
    deploy:
      kubeContext: prod
      kustomize:
        paths:
          - os-files/kustomize/overlays/prod